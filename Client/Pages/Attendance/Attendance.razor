@page "/attendance"
@inject NavigationManager NavigationManager;
@inject UserService UserService;
@inject HttpClient HttpClient

<PageTitle>Attendance</PageTitle>

<style>
    .courses-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        gap: 30px;
        padding: 20px;
    }

    .course-card {
        width: calc(33.333% - 30px);
        background: linear-gradient(145deg, #ffffff, #f0f0f0);
        border-radius: 10px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        gap: 15px;
        height: 200px; /* Set a fixed height for uniformity */
    }

    .course-info {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
        text-align: center;
    }

    .course-info h5 {
        color: #333;
        font-size: 1.2em;
        text-transform: uppercase;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .course-btn {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        letter-spacing: 1px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .course-btn:hover, .course-btn:focus {
        background-color: #0056b3;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
</style>

<div>
    <h3>Attendance</h3>
    <div class="courses-container">
        @foreach (var classroom in userClassrooms)
        {
            <div class="course-card">
                <div class="course-info">
                    <h5>@classroom.ClassroomName</h5>
                    <button @onclick="() => NavigateToCourse(classroom.ClassroomId)" class="btn btn-primary course-btn">
                        View Attendance
                    </button>
                </div>
            </div>
        }
    </div>
</div>

@code {
    private List<ULMS.Shared.Models.Classroom> userClassrooms = new List<ULMS.Shared.Models.Classroom>();

    protected override async Task OnInitializedAsync()
    {
        var loggedInUserId = UserService.GetLoggedInUser().Id;
        userClassrooms = await HttpClient.GetFromJsonAsync<List<ULMS.Shared.Models.Classroom>>($"api/classroom/user/{loggedInUserId}");
    }

    private void NavigateToCourse(long ClassroomID)
    {
        if (UserService.GetLoggedInUser().Role == "Student")
        {
            NavigationManager.NavigateTo($"/attendance/{ClassroomID}");
        }
        else
        {
            NavigationManager.NavigateTo($"/attendanceinstructor/{ClassroomID}");
        }
    }
}



@* @page "/attendance" *@
@* *@
@* <PageTitle>Attendance</PageTitle> *@
@* *@
@* <h3>Attendance</h3> *@
@* *@
@* <form method="post"> *@
@*     <div class="form-group"> *@
@*         <label for="courseSelect">Course</label> *@
@*         <select id="courseSelect" class="form-control" name="SelectedCourse"> *@
@*             <option value="Course1">Calculus</option> *@
@*             <option value="Course2">Course 2</option> *@
@*             <!-- Add more courses as needed --> *@
@*         </select> *@
@*     </div> *@
@*     <div class="form-group"> *@
@*         <label for="dateSelect">Date</label> *@
@*         <input type="date" id="dateSelect" class="form-control" name="SelectedDate" /> *@
@*     </div> *@
@* *@
@*     <table class="table"> *@
@*         <thead> *@
@*             <tr> *@
@*                 <th>Student Name</th> *@
@*                 <th>Status</th> *@
@*             </tr> *@
@*         </thead> *@
@*         <tbody> *@
@*             <!-- Repeat this block for each student --> *@
@*             <tr> *@
@*                 <td>Farzeen Qaiser</td> *@
@*                 <td> *@
@*                     <select name="StudentStatus1" class="form-control"> *@
@*                         <option value="Absent">Absent</option> *@
@*                         <option value="Present">Present</option> *@
@*                         <option value="Late">Late</option> *@
@*                     </select> *@
@*                 </td> *@
@*             </tr> *@
@*             <tr> *@
@*                 <td>Saad Ahsan</td> *@
@*                 <td> *@
@*                     <select name="StudentStatus2" class="form-control"> *@
@*                         <option value="Absent">Absent</option> *@
@*                         <option value="Present">Present</option> *@
@*                         <option value="Late">Late</option> *@
@*                     </select> *@
@*                 </td> *@
@*             </tr> *@
@*             <tr> *@
@*                 <td>Muhaddis Farooq</td> *@
@*                 <td> *@
@*                     <select name="StudentStatus3" class="form-control"> *@
@*                         <option value="Absent">Absent</option> *@
@*                         <option value="Present">Present</option> *@
@*                         <option value="Late">Late</option> *@
@*                     </select> *@
@*                 </td> *@
@*             </tr> *@
@*             <!-- Add more students as needed --> *@
@*         </tbody> *@
@*     </table> *@
@* *@
@*     <button type="submit" class="btn btn-primary">Submit Attendance</button> *@
@* </form> *@
@* *@
